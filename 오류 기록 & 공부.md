Connecting to 'http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json' violates the following Content Security Policy directive: "default-src 'none'". The request has been blocked. Note that 'connect-src' was not explicitly set, so 'default-src' is used as a fallback.

### _#첫 번째 오류 발생_

\#req.body로 받는데 app.use(express.json());

app.use(express.urlencoded({extended:true}));

얘네를 안 씀

++ app.use((req, res, next) =>{

&nbsp; res.removeHeader("Content-Security-Policy");

&nbsp; next();

});

### _#두 번째 오류 발생_

\#ejs에서 ?\_method=PUT 형식으로 폼 전송을 하여서 서버에서 app.put을 하였는데
cannot POST 라는 에러가 계속해서 발생

const methodOverride = require('method-override');
app.use(methodOverride('\_method'))
로 셋팅을 하지 않아서 발생했던 것임

npm install sequelize sequelize-cli mysql2

\#db 작업을 쉽게 해주는 라이브러리인 sequelize 설치

sequelize init

\#초기화 명령어

config == db 설정 파일

mirgrations == git처럼 db가 변화하는 과정들을 추적함 변화를 취소하거나 db에 반영 ㄱㄴ

models == db 각 테이블의 정보 및 필드 타입 정의

seeders == 테이블에 기본 데이터를 넣고 싶을 때

require("dotenv".config());

npm i dotenv

\#.env에서 꺼내서 쓰려면 dontev

npm install express express-session sequelize connect-session-sequelize
\#session 쿠키를 db에 넣을 때

const session = require('express-session');  
\#session 미들웨어

const {Sequelize} = require('sequelize');
\#Sequelize ORM

const SequelizeStore = require('connect-session-sequelize')(session.Store)
\#세션을 db에 저장할 수 있게 해주는

const sequelize = new Sequelize('database', 'username', 'password', {
dialect: 'mysql',
host:process.env.DB_HOST,
port: process.env.PORT
})
\#db 연결하기

const store = new SequelizeStore({
db: sequelize,
tableName: 'Sessions',
})
\#Sessions라는 이름의 테이블에 저장하겠다

store.sync();
\#세션 테이블 없으면 자동 생성

res.redirect('back')
\#원래 있던 페이지로 돌아가라는 뜻. 허나... 가끔 작동이 안 될 때가 있음 브라우저에 network에서 referer에 담겨있는 걸 가져오는 거라 작동이 안 되면
res.redirect(req.get('Referer'))
\#이런 식으로 쓰면 작동함



app.get(/^\/category\/(.*)/, async(req,res)=>{
    let result = await Posts.findAll({where:{category:req.params[0]}})
    const user = req.user ? req.user.user_id : null;
    
    res.render('category.ejs', {posts:result, user:user,dayjs:dayjs,cate:req.params[0]})
})
카테고리에서 어쩔 수 없이 IT/개발 이런 식으로 /를 넣었는데 얘가 파라미터에 들어가는 순간 구분자로 인식하기 때문에 
/^\/category\/(.*)/ 이런 식으로 작성 category로 시작하고 그 뒤에 오는 것들이 req.params[0] 안에 담김. /를 문자로 인식하게 해주기 때문에
IT/개발 이런 식으로 써서 넘겨도 잘 인식함.
